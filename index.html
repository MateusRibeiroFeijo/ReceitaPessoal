<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Catálogo de Receitas</title>
    <link href="./assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="./assets/css/style.css" />
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="#">Receitas Pessoais</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
    </nav>

    <!-- Container de Receitas -->
    <div class="container my-5">
      <!-- Mensagem de boas-vindas -->
      <div class="card bg-light mb-4 shadow-sm">
        <div class="card-body text-center">
          <h2 class="card-title mb-2">
            Bem-vindo ao CRP: Catálogo de Receitas Pessoais!
          </h2>
          <p class="card-text fs-5">
            Cozinhar nunca foi tão fácil e organizado.
          </p>
        </div>
      </div>

      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Minhas Receitas</h2>
        <a href="receita-cadastro.html" class="btn btn-primary"
          >+ Nova Receita</a
        >
      </div>

      <div class="row" id="lista-receitas"></div>
    </div>

    <!-- Bootstrap JS -->
    <script src="./assets/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Script para carregar receitas -->
    <script>
      function carregarReceitas() {
        fetch("http://localhost:3000/receitas")
          .then((response) => {
            if (!response.ok) throw new Error("Erro ao buscar receitas");
            return response.json();
          })
          .then((receitas) => {
            const container = document.getElementById("lista-receitas");
            container.innerHTML = "";

            if (receitas.length === 0) {
              container.innerHTML =
                '<p class="text-muted">Nenhuma receita cadastrada até o momento.</p>';
              return;
            }

            receitas.forEach((receita) => {
              const card = `
            <div class="col-md-4 mb-4">
              <div class="card h-100 shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">${receita.nome}</h5>
                  <h6 class="card-subtitle mb-2 text-muted">${receita.categoria}</h6>
                  <p class="card-text">Tempo: ${receita.tempo} min • Dificuldade: ${receita.dificuldade}</p>
                  <p class="card-text"><strong>Ingredientes:</strong> ${receita.ingredientes}</p>
                  <p class="card-text"><strong>Modo de preparo:</strong> ${receita.modoPreparo}</p>
                </div>
              </div>
            </div>
          `;
              container.insertAdjacentHTML("beforeend", card);
            });
          })
          .catch((error) => {
            console.error("Erro ao carregar receitas:", error);
            document.getElementById("lista-receitas").innerHTML =
              "<p class='text-danger'>Erro ao carregar receitas.</p>";
          });
      }

      carregarReceitas();
    </script>
  </body>
</html>
