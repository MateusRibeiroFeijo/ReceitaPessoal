<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Listagem de Receitas</title>
    <link href="./bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="TelaListagem.CSS" />
  </head>
  <body>
    <!--MENU DE NAVEGAÇÃO-->
    <header>
      <nav id="nav">
        <img
          id="logo"
          src="https://previews.123rf.com/images/stockgiu/stockgiu2304/stockgiu230401098/202846093-chef-hat-symbolizes-gourmet-cooking-industry.jpg"
          alt="imagem logo"
          class="img-fluid logo"
        />
        <button id="menu-toggle">&#9776;</button>
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-inline-item" href="index.html">Página Inicial</a>
          </li>
          <li class="nav-item">
            <a class="nav-inline-item" href="receita-listagem.html">Receitas cadastradas</a>
          </li>
          <li class="nav-item">
            <a class="nav-inline-item" href="receita-cadastro.html">Cadastrar nova Receita</a>
          </li>
        </ul>
      </nav>
    </header>

    <div class="container my-4">
      <div class="alert alert-primary text-center">
        Tela de Listagem de Receitas
      </div>
      <div class="d-flex justify-content-between mb-3">
        <h4>Minhas Receitas</h4>
        <a href="receita-cadastro.html" class="btn btn-success"
          >+ Nova Receita</a
        >
      </div>

      <div id="receitas" class="row"></div>
    </div>

    <footer class="bg-dark text-light py-4 mt-5">
      <div class="container text-center">
        <p class="mb-1">&copy; 2025 Catálogo de Receitas Pessoais</p>
        <p class="mb-0">Feito com ♥ por Mateus</p>
      </div>
    </footer>

    <script>
      document
        .getElementById("menu-toggle")
        .addEventListener("click", function () {
          document.querySelector(".nav").classList.toggle("active");
        });
    </script>

    <script>
      fetch("http://localhost:3000/receitas")
        .then((response) => response.json())
        .then((receitas) => {
          const lista = document.getElementById("receitas");
          lista.innerHTML = receitas
            .map(
              (receita) => `
        <div class="col-md-6 mb-3">
          <div class="card">
            <div class="card-body">
              <h5>${receita.nome}</h5>
              <small class="text-muted">${receita.categoria}</small>
              <p><strong>Tempo:</strong> ${receita.tempo} min</p>
              <p><strong>Dificuldade:</strong> ${receita.dificuldade}</p>
              <p><strong>Ingredientes:</strong><br>${receita.ingredientes}</p>
              <p><strong>Modo de Preparo:</strong><br>${receita.modoPreparo}</p>
              <div class="d-flex gap-2">
                <a href="receita-cadastro.html?id=${receita.id}" class="btn btn-sm btn-primary">Editar</a>
                <button class="btn btn-sm btn-danger" onclick="excluirReceita(${receita.id})">Excluir</button>
              </div>
            </div>
          </div>
        </div>
      `
            )
            .join("");
        })
        .catch((error) => {
          console.error("Erro:", error);
          lista.innerHTML =
            '<p class="text-danger">Erro ao carregar receitas.</p>';
        });
    </script>
  </body>
</html>
